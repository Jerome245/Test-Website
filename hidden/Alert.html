<!DOCTYPE html>
<html>
	<head>
		<title>
			Alert
		</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
	<script>
	    var start = 0;
	    var Email = "";
		var Type = "";
		var Club = "";
		function loadTableAlert(){
		    if (start == 0){
		        Email = "None";
		        Type = "None";
		        Club = "None";
		        start += 1;
		    }
		    else{
		        Email = document.getElementById('email').value;
		        Type = document.getElementById('type').value;
		        Club = document.getElementById('club').value;
		    }
		    $.ajax({
				url : 'getdropdown',
				type : 'POST',
				data : {entree: 'Email'},
				success : function(data) {
					if (data != "Error") {
						data = JSON.parse(data);
						var output = "<option>None</option>";
						for (var q = 1; q != data.length; q++) {   
							output += "<option>" + data[q][0] + "</option>";
						}
						document.getElementById('email').innerHTML = output;
					}
					document.getElementById('email').value = Email;
				},
				error : function(request,error){
					console.log("Request: "+ error + "\n" + request);
					document.getElementById('email').value = Email;
				} ,
				timeout: 5000
			});
			$.ajax({
				url : 'getdropdown',
				type : 'POST',
				data : {entree: 'Type'},
				success : function(data) {
					if (data != "Error") {
						data = JSON.parse(data);
						var output = "<option>None</option>";
						for (var q = 1; q != data.length; q++) {   
							output += "<option>" + data[q][0] + "</option>";
						}
						document.getElementById('type').innerHTML = output;
					}
					document.getElementById('type').value = Type;
				},
				error : function(request,error){
					console.log("Request: "+ error + "\n" + request);
					document.getElementById('type').value = Type;
				} ,
				timeout: 5000
			});
			$.ajax({
				url : 'getdropdown',
				type : 'POST',
				data : {entree: 'Club'},
				success : function(data) {
					if (data != "Error") {
						data = JSON.parse(data);
						var output = "<option>None</option>";
						for (var q = 2; q != data.length; q++) {   
							output += "<option>" + data[q][0] + "</option>";
						}
						document.getElementById('club').innerHTML = output;
					}
					document.getElementById('club').value = Club;
				},
				error : function(request,error){
					console.log("Request: "+ error + "\n" + request);
					document.getElementById('club').value = Club;
				} ,
				timeout: 5000
			});
			$.ajax({
				url : 'displayalert',
				type : 'POST',
				data : {Email:Email, Type:Type, Club:Club},
				success : function(data) {
					if (data != "Empty") {
					    data = JSON.parse(data);
    					var output = "<tr><th>Alert</th><th>Time</th>";
    					for (var q = 0; q != data.length; q++) {   
    						output+="<tr>";
    						for (var i = 0; i != 2; i++) {   				
    							output+="<td>" + data[q][i] + "</td>";
    						}
    						output+="</tr>";
    					}
    					document.getElementById('displaytable').innerHTML = output;
					}
					else {
					    document.getElementById('displaytable').innerHTML = "Empty";
					}
				},
				error : function(request,error){
					console.log("Request: "+ error + "\n" + request);
				} ,
				timeout: 5000
			});
		}	
	</script>
	</head>
	<body onload = "loadTable()">
		 <nav class="navbar navbar-expand-md bg-dark navbar-dark" id="navv">
			<a class="navbar-brand" href="#">
				<img src="http://wvc.pshs.edu.ph/images/banners/1200px-Philippine_Science_High_School_Main_Campus_Logo_2012.svg.png" alt="Logo" style="width:40px;">
				PSHS-CLC Clubs
			</a>

			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
				<span class="navbar-toggler-icon"></span>
			</button>

			<div class="collapse navbar-collapse" id="collapsibleNavbar">
				<ul class="navbar-nav">
					<li class="nav-item">
						<h4 style="color:white">Admin's Console</h4>
					</li>
				</ul>
			</div>
		</nav>
		<br>
	        <div class="row justify-content-center">
				<div class="col-sm-10 ">
				    <label for="email">Email:</label>
				    <select id="email"></select>
				    <label for="type">Type:</label>
				    <select id="type"></select>
				    <label for="club">Club:</label>
				    <select id="club"></select>
					<button class="btn" type="button" onclick="loadTable()">Load Table</button>
				</div>
			</div>
			<div class="row justify-content-center">
				<div class="col-sm-10 ">
					<h3>Logs</h3>
				</div>
			</div>
			<div class="row justify-content-center">
				<div class="col-sm-10 ">
					<table id="displaytable" class="table table-striped"></table>
				</div>
			</div>
	</body>
</html>